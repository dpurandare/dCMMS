# ==========================================
# APPLICATION
# ==========================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info

# ==========================================
# DATABASE
# ==========================================
DATABASE_URL=postgresql://dcmms_user:dcmms_password_dev@localhost:5432/dcmms

# Test database (for running tests)
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/dcmms_test

# ==========================================
# JWT / AUTH
# ==========================================
JWT_SECRET=changeme-use-a-long-random-string-at-least-64-characters-long!
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# ==========================================
# IDENTITY PROVIDER (IdP)
# ==========================================
IDP_PROVIDER=local
# Options: local, auth0, azure-ad, keycloak, okta

# Auth0 configuration (if using IDP_PROVIDER=auth0)
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your-client-id
AUTH0_CLIENT_SECRET=your-client-secret
AUTH0_AUDIENCE=https://api.dcmms.io

# Azure AD configuration (if using IDP_PROVIDER=azure-ad)
AZURE_AD_TENANT_ID=your-tenant-id
AZURE_AD_CLIENT_ID=your-client-id
AZURE_AD_CLIENT_SECRET=your-client-secret

# Keycloak configuration (if using IDP_PROVIDER=keycloak)
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=dcmms
KEYCLOAK_CLIENT_ID=dcmms-api
KEYCLOAK_CLIENT_SECRET=your-client-secret

# ==========================================
# REDIS (CACHE)
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_dev
REDIS_DB=0

# ==========================================
# CORS
# ==========================================
CORS_ORIGIN=http://localhost:3000,http://localhost:4200
CORS_CREDENTIALS=true

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_MAX=100
RATE_LIMIT_TIMEWINDOW=60000

# ==========================================
# SWAGGER/API DOCS
# ==========================================
SWAGGER_ENABLED=true
SWAGGER_HOST=localhost:3000
SWAGGER_SCHEMES=http,https

# ==========================================
# CLICKHOUSE (ANALYTICS)
# ==========================================
CLICKHOUSE_HOST=http://localhost:8123
CLICKHOUSE_USER=clickhouse_user
CLICKHOUSE_PASSWORD=clickhouse_password_dev
CLICKHOUSE_DATABASE=dcmms_analytics

# ==========================================
# COMPLIANCE REPORTS
# ==========================================
# Storage path for compliance reports (local or S3)
COMPLIANCE_REPORTS_PATH=/tmp/dcmms/compliance-reports

# S3 configuration (if using S3 for compliance reports)
# COMPLIANCE_REPORTS_S3_BUCKET=dcmms-compliance-reports
# COMPLIANCE_REPORTS_S3_REGION=us-east-1
# COMPLIANCE_REPORTS_S3_ACCESS_KEY_ID=your-access-key
# COMPLIANCE_REPORTS_S3_SECRET_ACCESS_KEY=your-secret-key

# ==========================================
# DATA RETENTION POLICY
# ==========================================
# Enable/disable automated data purge jobs
PURGE_JOBS_ENABLED=true
PURGE_JOBS_DRY_RUN=false  # Set to true for testing without actual deletion

# Retention periods (in days/years)
DATA_RETENTION_TELEMETRY_RAW_DAYS=90
DATA_RETENTION_ALERTS_RESOLVED_YEARS=2
DATA_RETENTION_NOTIFICATION_HISTORY_YEARS=1
DATA_RETENTION_USER_DELETED_DAYS=30
DATA_RETENTION_ASSETS_DECOMMISSIONED_YEARS=10
DATA_RETENTION_WORK_ORDERS_YEARS=7
DATA_RETENTION_AUDIT_LOGS_YEARS=7
DATA_RETENTION_COMPLIANCE_REPORTS_YEARS=7
DATA_RETENTION_DEBUG_LOGS_DAYS=90
DATA_RETENTION_AUDIT_LOGS_DAYS=365

# ==========================================
# ML / FEAST FEATURE STORE
# ==========================================
# Feast feature server
FEAST_SERVER_ENABLED=false  # Set to true to start Feast server with backend
FEAST_SERVER_URL=http://localhost:6566
FEAST_REPO_PATH=../../../ml/feast

# Feature materialization
FEAST_MATERIALIZE_SCRIPT=../../../ml/feast/materialize_features.py
FEAST_MATERIALIZE_SCHEDULE=0 */6 * * *  # Every 6 hours
